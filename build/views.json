{
  "attribution": "<div class=\"sc-brand\">\n  <svg viewBox=\"0 0 100 100\" class=\"svg-icon smart-connections\">\n    <path d=\"M50,20 L80,40 L80,60 L50,100\" stroke=\"currentColor\" stroke-width=\"4\" fill=\"none\"></path>\n    <path d=\"M30,50 L55,70\" stroke=\"currentColor\" stroke-width=\"5\" fill=\"none\"></path>\n    <circle cx=\"50\" cy=\"20\" r=\"9\" fill=\"currentColor\"></circle>\n    <circle cx=\"80\" cy=\"40\" r=\"9\" fill=\"currentColor\"></circle>\n    <circle cx=\"80\" cy=\"70\" r=\"9\" fill=\"currentColor\"></circle>\n    <circle cx=\"50\" cy=\"100\" r=\"9\" fill=\"currentColor\"></circle>\n    <circle cx=\"30\" cy=\"50\" r=\"9\" fill=\"currentColor\"></circle>\n  </svg>\n  <p><a style=\"font-weight: 700;\" href=\"https://smartconnections.app/\">Smart Connections</a></p>\n</div>",
  "sc_change": "<div class=\"sc-change\">\n  <div class=\"sc-variation\">\n    <div class=\"new-content\"></div>\n    <button>Accept</button>\n  </div>\n  <div class=\"sc-variation\">\n    <div class=\"old-content\"></div>\n    <button>Reject</button>\n  </div>\n  <div class=\"sc-change-footer\">\n    <i>Time saved: <%= time_saved %></i>\n    <%- this.attribution %>\n  </div>\n</div>\n\n",
  "smart_chat": "<div class=\"sc-chat-container\">\n  <div class=\"sc-top-bar-container\">\n    <input class=\"sc-chat-name-input\" type=\"text\" value=\"<%= name %>\" placeholder=\"Chat Name\">\n    <button title=\"Open Conversation Note\"><%- this.get_icon('external-link') %></button>\n    <button title=\"Chat History\"><%- this.get_icon('history') %></button>\n    <button title=\"Chat Options\" style=\"display: none;\"><%- this.get_icon('sliders-horizontal') %></button>\n    <button title=\"Chat Settings\"><%- this.get_icon('gear') %></button>\n    <button title=\"New Chat\"><%- this.get_icon('plus') %></button>\n  </div>\n  <div id=\"settings\" class=\"sc-overlay\"></div>\n  <div class=\"sc-chat-box\">\n    <div class=\"sc-message-container\">\n      <div class=\"sc-message assistant\">\n        <div class=\"sc-message-content\">\n          <span>\n            Hi there, welcome to the Smart Chat.&nbsp;Ask me a question about your notes and I'll try to answer it.\n          </span>\n        </div>\n      </div>\n      <%- messages %>\n    </div>\n  </div>\n  <div class=\"sc-chat-form\">\n    <textarea class=\"sc-chat-input\" placeholder=\"Try &quot;Based on my notes&quot; or &quot;Summarize [[this note]]&quot; or &quot;Important tasks in /folder/&quot;\"></textarea>\n    <div class=\"sc-btn-container\">\n      <span id=\"sc-abort-button\" style=\"display: none;\"><%- this.get_icon('square') %></span>\n      <button class=\"send-button\" id=\"sc-send-button\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"none\" viewBox=\"0 0 32 32\">\n          <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"currentColor\" />\n          <path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M15.192 8.906a1.143 1.143 0 0 1 1.616 0l5.143 5.143a1.143 1.143 0 0 1-1.616 1.616l-3.192-3.192v9.813a1.143 1.143 0 0 1-2.286 0v-9.813l-3.192 3.192a1.143 1.143 0 1 1-1.616-1.616z\" clip-rule=\"evenodd\" fill=\"#727272\"></path>\n        </svg>\n      </button>\n    </div>\n  </div>\n</div>\n<%- this.attribution %>\n  ",
  "smart_chat_msg": "<div class=\"sc-message <%= role %>\">\n  <div class=\"sc-message-content\" data-content=\"<%= content %>\">\n    <span><%= content %></span>\n    <span class=\"sc-msg-button\" title=\"Copy message to clipboard\"><%- this.get_icon('copy') %></span>\n    <!-- TODO: Copy context to clipboard (icon: eye) -->\n    <!-- TODO: Copy prompt to clipboard (icon: files) -->\n  </div>\n</div>",
  "smart_chat_settings": "<div class=\"setting-component\"\n  data-name=\"Default Language\"\n  data-setting=\"language\"\n  data-type=\"dropdown\"\n  data-description=\"Default language to use for Smart Chat. Changes which self-referential pronouns will trigger lookup of your notes. <b id='self-referential-pronouns'>Current: my, I, me, mine, our, ours, us, we</b>\"\n  data-option-1=\"en|English\"\n  data-option-2=\"es|Spanish\"\n  data-option-3=\"fr|French\"\n  data-option-4=\"de|German\"\n  data-option-5=\"it|Italian\"\n  data-callback=\"update_language\"\n></div>\n<div class=\"setting-component\"\n  data-name=\"Model Platform\"\n  data-setting=\"chat_model_platform_key\"\n  data-type=\"dropdown\"\n  data-description=\"Select a model platform to use with Smart Chat.\"\n  <%- chat_platforms.map((platform, i) => `data-option-${i + 1}=\"${platform.key}|${platform.description}\"`).join('\\n') %>\n  data-callback=\"changed_smart_chat_model\"\n></div>\n<% if(chat_platform?.fetch_models) { %>\n  <% if(settings[settings.chat_model_platform_key]?.api_key) { %>\n    <div class=\"setting-component\"\n      data-name=\"Model Name\"\n      data-type=\"dropdown\"\n      data-setting=\"<%= settings.chat_model_platform_key %>.model_name\"\n      data-callback=\"changed_smart_chat_model\"\n      <%- platform_chat_models.map((model, i) => `data-option-${i}=\"${model.key}|${model.model_name} (${model.description})\"`).join('\\n') %>\n    ></div>\n  <% } %>\n  <% if(!platform_chat_models.length) { %>\n    <div class=\"setting-component\"\n      data-name=\"Refresh Models List\"\n      data-type=\"button\"\n      data-callback=\"changed_smart_chat_model\"\n    ></div>\n  <% } %>\n  <div class=\"setting-component\"\n    data-name=\"<%= chat_platform.description %> API Key\"\n    data-type=\"password\"\n    data-setting=\"<%= settings.chat_model_platform_key %>.api_key\"\n    <% if(chat_platform.signup_url) { %>\n      data-description=\"<a href='<%= chat_platform.signup_url %>'>Get API Key</a> for <%= chat_platform.description %>.\"\n    <% } else { %>\n      data-description=\"API Key for <%= chat_platform.description %>.\"\n    <% } %>\n    data-placeholder=\"Enter an API Key\"\n    data-button=\"Save\"\n    data-callback=\"test_chat_api_key\"\n  ></div>\n<% } %>\n<% if (settings.chat_model_platform_key.startsWith('custom_local')) { %>\n  <h3>Custom Local Model</h3>\n  <div class=\"setting-component\"\n    data-name=\"Model Name\"\n    data-type=\"text\"\n    data-setting=\"custom_local.model_name\"\n    data-description=\"Name of the custom model.\"\n    data-placeholder=\"Enter a model name\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"protocol\"\n    data-type=\"text\"\n    data-setting=\"custom_local.protocol\"\n    data-description=\"Protocol for chat server (http or https).\"\n    data-placeholder=\"Enter a protocol\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"hostname\"\n    data-type=\"text\"\n    data-setting=\"custom_local.hostname\"\n    data-description=\"Host for local chat server.\"\n    data-placeholder=\"Enter a host\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"port\"\n    data-type=\"number\"\n    data-setting=\"custom_local.port\"\n    data-description=\"Port for local chat server.\"\n    data-placeholder=\"Enter a port number\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"path\"\n    data-type=\"text\"\n    data-setting=\"custom_local.path\"\n    data-description=\"Path for local chat server.\"\n    data-placeholder=\"Enter a path\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"streaming\"\n    data-type=\"toggle\"\n    data-setting=\"custom_local.streaming\"\n    data-description=\"Enable streaming for local chat server. Disable if you are getting CORS errors.\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"Max input tokens\"\n    data-description=\"Maximum number of tokens for input to the model.\"\n    data-type=\"number\"\n    data-setting=\"custom_local.max_input_tokens\"\n    data-placeholder=\"Enter a number\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n<% } else if(settings.chat_model_platform_key.startsWith('custom_api')) { %>\n  <h3>Custom Server</h3>\n  <div class=\"setting-component\"\n    data-name=\"Model Name\"\n    data-type=\"text\"\n    data-setting=\"custom_api.model_name\"\n    data-description=\"Name of the custom model.\"\n    data-placeholder=\"Enter a model name\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"protocol\"\n    data-type=\"text\"\n    data-setting=\"custom_api.protocol\"\n    data-description=\"Protocol for chat server (http or https).\"\n    data-placeholder=\"Enter a protocol\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"hostname\"\n    data-type=\"text\"\n    data-setting=\"custom_api.hostname\"\n    data-description=\"Host for chat server.\"\n    data-placeholder=\"Enter a host\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"path\"\n    data-type=\"text\"\n    data-setting=\"custom_api.path\"\n    data-description=\"Path for chat server.\"\n    data-placeholder=\"Enter a path\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"streaming\"\n    data-type=\"toggle\"\n    data-setting=\"custom_api.streaming\"\n    data-description=\"Enable streaming for chat server. Disable if you are getting CORS errors.\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"Max input tokens\"\n    data-description=\"Maximum number of tokens for input to the model.\"\n    data-type=\"number\"\n    data-setting=\"custom_api.max_input_tokens\"\n    data-placeholder=\"Enter a number\"\n    data-callback=\"changed_smart_chat_model\"\n  ></div>\n  <div class=\"setting-component\"\n    data-name=\"API Key\"\n    data-type=\"text\"\n    data-setting=\"custom_api.api_key\"\n    data-description=\"API Key for the custom server sent as a header (bearer token).\"\n    data-placeholder=\"Enter an API Key\"\n    data-button=\"Save\"\n    data-callback=\"test_chat_api_key\"\n  ></div>\n<% } %>",
  "smart_chat_system_msg": "<div class=\"sc-<%= role %>\">\n  <div class=\"\" data-content=\"<%= content %>\">\n    <span><%= content %></span>\n  </div>\n</div>",
  "smart_connections": "<div class=\"sc-top-bar\">\n  <p class=\"sc-context\" data-key=\"<%- current_path %>\">\n    <%- this.notes_ct %> (<%- this.blocks_ct %>)\n  </p>\n  <button class=\"sc-refresh\"><%- this.get_icon('refresh-cw') %></button>\n  <button class=\"sc-fold-all\"><%- this.get_icon('fold-vertical') %></button>\n  <button class=\"sc-unfold-all\"><%- this.get_icon('unfold-vertical') %></button>\n  <button class=\"sc-filter\"><%- this.get_icon('sliders-horizontal') %></button>\n  <button class=\"sc-search\"><%- this.get_icon('search') %></button>\n  <!-- <button title=\"Settings\"><%- this.get_icon('gear') %></button> -->\n</div>\n<div id=\"settings\" class=\"sc-overlay\"></div>\n<div class=\"sc-list\">\n  <% for (let result of results) { %>\n  <div class=\"search-result<%- !this.settings.expanded_view ? ' sc-collapsed' : '' %>\" data-path=\"<%- result.item.path.replace(/\"/g, '&quot;') %>\">\n    <span class=\"header\">\n      <%- this.get_icon('right-triangle') %>\n      <a class=\"search-result-file-title\" title=\"<%- result.item.path.replace(/\"/g, '&quot;') %>\" draggable=\"true\">\n        <small><%- [result.score?.toFixed(2), result.item.name].join(' | ') %></small>\n      </a>\n    </span>\n    <ul draggable=\"true\">\n      <li class=\"search-result-file-title\" title=\"<%- result.item.path.replace(/\"/g, '&quot;') %>\" data-collection=\"<%= result.item.collection_key %>\"></li>\n    </ul>\n  </div>\n  <% } %>\n</div>\n<div class=\"sc-bottom-bar\">\n  <span class=\"sc-context\" data-key=\"<%- current_path %>\" title=\"<%- current_path %>\">\n    <%- current_path.split('/').pop().split('.').shift() %><%- typeof re_ranked !== 'undefined' && re_ranked ? ' (re-ranked)' : '' %>\n  </span>\n  <%- this.attribution %>\n</div>",
  "smart_note_inspect": "<h2>Blocks</h2>\n<% if(note.blocks.length === 0) { %>\n  <p>No blocks</p>\n<% } %>\n<% for(let block of note.blocks.sort((a, b) => a.line_start - b.line_start)) { %>\n<p>\n  <%- block.sub_key.split(\"#\").join(\" > \") + \" (\" + block.size + \" chars; lines: \" + block.line_start + \"-\" + block.line_end + \")\" %>\n  <br>\n  <%- block.should_embed ? \"<span style='color: green;'>should embed</span>\" : \"<span style='color: orange;'>embedding skipped</span>\" %>\n</p>\n<blockquote>\n  <%- (await block.read())\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\\n/g, \"<br>\")\n    .replace(/\\t/g, \"&nbsp;&nbsp;\")\n  %>\n</blockquote>\n<hr>\n<% } %>\n\n",
  "smart_view_search": "<div class=\"sc-search-container\">\n  <h2>Search Smart Connections</h2>\n  <div class=\"sc-search-input\">\n    <textarea\n      id=\"query\"\n      name=\"query\"\n      placeholder=\"Describe what you're looking for (e.g., 'PKM strategies', 'story elements', 'personal AI alignment')\"\n    ></textarea>\n    <button id=\"search\"><%- this.get_icon('search') %></button>\n  </div>\n  <p>Use semantic (embeddings) search to surface relevant notes. Results are sorted by similarity to your query. Note: returns different results than lexical (keyword) search.</p>\n</div>\n\n"
}